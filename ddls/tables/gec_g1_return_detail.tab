CREATE TABLE GEC_G1_RETURN_DETAIL
(
  G1_RETURN_DETAIL_ID	NUMBER(38),
  ASSET_ID				NUMBER(38),
  AREA_ID				VARCHAR2(2),
  LEGAL_ENTITY_CD		VARCHAR2(40),
  BARGAIN_REF			VARCHAR2(80),
  BROKER_CD				VARCHAR2(6),
  RATE					NUMBER(14,6),
  FEE					NUMBER(14,6),
  RECLAIM_RATE			NUMBER(10,8),
  SETTLE_DATE			NUMBER(8),
  TRADE_DATE			NUMBER(8),
  TRANSACTION_TYPE	 	VARCHAR2(1),
  G1_STATUS				VARCHAR2(3),
  G1_STATUS_MSG			VARCHAR2(64),
  GEC_STATUS			VARCHAR2(2),
  GEC_STATUS_MSG		VARCHAR2(64),
  EQL_STATUS			VARCHAR2(2),
  EQL_STATUS_MSG		VARCHAR2(64),
  CREATED_AT            DATE default SYSDATE,
  CREATED_BY            VARCHAR2(64),
  UPDATED_AT            DATE DEFAULT SYSDATE,
  UPDATED_BY            VARCHAR2(64),
  CPTY					VARCHAR2(6),
  RETURN_PRICE			NUMBER(14,4),
  RETURN_VALUE			NUMBER(14,2),
  OLD_RETURN_PRICE		NUMBER(14,4),
  OLD_RETURN_VALUE		NUMBER(14,2), 
  EQL_ELIGIBLE_FLAG		VARCHAR2(1),
  EQL_RETURN_ID			NUMBER(15),
  QTY					NUMBER(38),
  EQL_UPDATE_REASON_CD	VARCHAR2(2),
  EQL_UPDATE_REASON_COMMENT	VARCHAR2(128),
  COLLATERAL_CURRENCY_CD	VARCHAR2(3),
  EQL_COLLATERAL_TYPE		VARCHAR2(2), 
  ACCEPT_IN_LOTS_FLAG		VARCHAR2(1)	DEFAULT 'N' NOT NULL,
  TERM_DATE					NUMBER(8),
  DOMESTIC_TAX_PERCENTAGE	NUMBER(10,8),
  EXPECTED_RETURN_DATE		NUMBER(8),
  OVERSEAS_TAX_PERCENTAGE	NUMBER(10,8),
  LAST_UPDATED_BY       	VARCHAR2(64),
  LAST_UPDATED_AT       	DATE
)TABLESPACE GEC;

COMMENT ON TABLE GEC_G1_RETURN_DETAIL
  IS 'This table is to store return detail from G1.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.G1_STATUS  
  IS 'Values:PR, XPR(Cancelled)';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.G1_STATUS_MSG  
  IS 'Values:PR, Cancelled';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.GEC_STATUS  
  IS 'Values:P-ending, I-nF-light, S-ent, A-ccepted, M-odified, P-endingC-ancel, C-ancelled';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.GEC_STATUS_MSG  
  IS 'Values:Pending, In-Flight, Sent, Accepted, Modified, Pending Cancel, Cancelled';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.EQL_STATUS  
  IS 'Values:I-nF-flight, S-ent, A-ccepted, R-ejected, P-endingC-ancel, C-ancelled';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.EQL_STATUS_MSG  
  IS 'Values:In-Flight, Sent, Accepted, Rejected, Pending Cancel, Cancelled';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.CREATED_BY  
  IS 'Values: System, userId';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.UPDATED_BY  
  IS 'Values: System, userId';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.TRANSACTION_TYPE  
  IS 'Values:B-orrow, L-oan.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.EQL_UPDATE_REASON_CD  
  IS 'Values:  CU | PC | TD | IQ | IS | CA | CV | UD | DN | DS | OT | RE | SR | SN, used to populate updateReason field in RTAC/CA message.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.EQL_UPDATE_REASON_COMMENT  
  IS 'Used to populate narrative field in RTAC/CA message.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.EQL_COLLATERAL_TYPE  
  IS 'Values: CA, NC, CP';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.ACCEPT_IN_LOTS_FLAG  
  IS 'Values: N,Y. Y means the return request has been accepted in lots. It is aggregated row in UI.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.RECLAIM_RATE  
  IS 'The same as dividend rate. Allow user to input 9(3)V9(6) from UI , and store the value divide 100 to DB.';
COMMENT ON COLUMN GEC_G1_RETURN_DETAIL.ACCEPT_IN_LOTS_FLAG  
  IS 'The same as Dom Div Rate 9(3)v9(6), and store the value divide 100 to DB.';  
       
ALTER TABLE GEC_G1_RETURN_DETAIL ADD CONSTRAINTS GEC_G1_RETURN_DETAIL_PK
  PRIMARY KEY(G1_RETURN_DETAIL_ID) USING INDEX TABLESPACE GEC;

ALTER TABLE GEC_G1_RETURN_DETAIL ADD CONSTRAINT G1_RETURN_DETAIL_FK1 FOREIGN KEY (ASSET_ID)
  REFERENCES GEC_ASSET (ASSET_ID);
  
alter table GEC_G1_RETURN_DETAIL
  ADD CONSTRAINT GEC_G1_RETURN_DETAIL_UK1 UNIQUE (LEGAL_ENTITY_CD,BARGAIN_REF);