create table GEC_BORROW_REQUEST
(
  BORROW_REQUEST_ID   NUMBER(38) not null,
  AUTOBORROW_BATCH_ID VARCHAR2(24),
  AGGREGATE_ID        NUMBER(15),
  BORROW_REQUEST_TYPE VARCHAR2(10) not null,
  STATUS              VARCHAR2(2) not null,
  BORROW_REQUEST_FILE_TYPE     VARCHAR2(10),
  STATUS_MSG          VARCHAR2(64),
  RESPONSE_AT         DATE,
  RESPONSE_BY         VARCHAR2(64),
  REQUEST_AT          DATE default SYSDATE,
  REQUEST_BY          VARCHAR2(64),
  BRANCH_CD 	      VARCHAR2(10),
  BROKER_CD 		  VARCHAR2(6),
  SETTLEMENT_MARKET   VARCHAR2(8),
  COLLATERAL_TYPE     VARCHAR2(4),
  COLLATERAL_CURRENCY_CD 		VARCHAR2(3),
  EQUILEND_CHAIN_ID   NUMBER(10),
  EQUILEND_SCHEDULE_ID NUMBER(10),
  REQUEST_COUNT       NUMBER(5),
  SHTT_ABNO_COUNT     NUMBER(5),
  ORAC_ABRE_COUNT     NUMBER(5),
  CANCEL_BY           VARCHAR2(64),
  CANCEL_AT           DATE,
  TYPE                VARCHAR2(11) not null,
  EXPIRATION_TIME     DATE,
  ALLOCATE_STATUS     VARCHAR2(1) default 'N' not null,
  FULL_FILL 		  VARCHAR2(1) default 'N' not null,
  LAST_UPDATED_BY	  VARCHAR2(64),
  LAST_UPDATED_AT     DATE
)tablespace GEC;

ALTER TABLE GEC_BORROW_REQUEST
  ADD( CONSTRAINT GEC_BORROW_REQUEST_PK PRIMARY KEY (BORROW_REQUEST_ID)  USING INDEX TABLESPACE  GEC);
ALTER TABLE GEC_BORROW_REQUEST
  ADD CONSTRAINT GEC_BORROW_REQUEST_FK1 FOREIGN KEY (BORROW_REQUEST_FILE_TYPE) REFERENCES  GEC_BRW_REQUEST_FILE_TYPE(BORROW_REQUEST_FILE_TYPE) ;
ALTER TABLE GEC_BORROW_REQUEST
  ADD CONSTRAINT GEC_BORROW_REQUEST_FK2 FOREIGN KEY (EQUILEND_CHAIN_ID) REFERENCES  GEC_CHAIN(EQUILEND_CHAIN_ID) ;
ALTER TABLE GEC_BORROW_REQUEST
  ADD CONSTRAINT GEC_BORROW_REQUEST_FK3 FOREIGN KEY (EQUILEND_SCHEDULE_ID) REFERENCES  GEC_SCHEDULE(EQUILEND_SCHEDULE_ID) ;
CREATE UNIQUE INDEX GEC_BORROW_REQUEST_UK1 ON GEC_BORROW_REQUEST(AGGREGATE_ID)  TABLESPACE GEC;
CREATE UNIQUE INDEX GEC_BORROW_REQUEST_UK2 ON GEC_BORROW_REQUEST(AUTOBORROW_BATCH_ID) TABLESPACE GEC;  
comment on table GEC_BORROW_REQUEST
  is 'For GEC1.3.1 legacy data, these fields have null value: RESPONSE_AT/RESPONSE_BY/REQUEST_AT/REQUEST_BY';
comment on column GEC_BORROW_REQUEST.ALLOCATE_STATUS
  is 'Value is N-ew/P-ending(pending allocation, receive EOB message)/C-omplete, for dev old data, set this value as C';
comment on column GEC_BORROW_REQUEST.BORROW_REQUEST_ID
  is 'It is sequence id, and it must use the same sequence id as GEC_REQUEST.REQUEST_ID, i.e gec_request_id_seq';
comment on column GEC_BORROW_REQUEST.STATUS
  is 'STATUS Values and allocate_status value: I-nFlight-N, P-ending(odd lot)-N, 
  R-esponse Received-C, F-ail-N,CC-Canceled-C,C-losed-N,PC-Pending Cancel-N,E-xpired-N';
comment on column GEC_BORROW_REQUEST.BORROW_REQUEST_FILE_TYPE
  is 'Values from gec_brw_request_file_type table BORROW_REQUEST_FILE_TYPE column';
COMMENT ON COLUMN GEC_BORROW_REQUEST.SETTLEMENT_MARKET
  IS 'Borrow request settlement market, valuese is:"US", "CA" and "NON_US" or other trade country code.';
COMMENT ON COLUMN GEC_BORROW_REQUEST.COLLATERAL_TYPE
  IS 'Collateral type filter value when export borrow request. Value is CASH, USTA AND SBNC.';
COMMENT ON COLUMN GEC_BORROW_REQUEST.BRANCH_CD
  IS 'Broker"s branch code when export borrow request. Value is TOR AND BOS';
COMMENT ON COLUMN GEC_BORROW_REQUEST.BROKER_CD
  IS 'Filter value when export borrow request. Value is TOR AND BOS';  
COMMENT ON COLUMN GEC_BORROW_REQUEST.SHTT_ABNO_COUNT
  IS 'Accept count, accept message type is SHTT/ABNO.';
COMMENT ON COLUMN GEC_BORROW_REQUEST.ORAC_ABRE_COUNT
  IS 'Reject count, reject message type is ORAC/ABRE.';  
COMMENT ON COLUMN GEC_BORROW_REQUEST.TYPE
  IS 'Value is FILE/JOB_AUTO/MANUAL_AUTO.';  
COMMENT ON COLUMN GEC_BORROW_REQUEST.AUTOBORROW_BATCH_ID
  IS 'Value of <standardAggregateId> in ABIN/IN message';  
COMMENT ON COLUMN GEC_BORROW_REQUEST.AGGREGATE_ID
  IS 'Value of <aggregateId> in AGAC/ABSB message';  
      
