create table GEC_COUNTERPARTY
(
    COUNTERPARTY_ID     NUMBER(10) NOT NULL,
    COUNTERPARTY_CD	    VARCHAR2(6) NOT NULL,
    TRANSACTION_CD	    VARCHAR2(3) NOT NULL,
    PREPAY_RATE	        NUMBER(14,6),
    BENCHMARK_INDEX_CD	VARCHAR2(50),
    GB_COLLATERAL_PERCENTAGE 	NUMBER(7,6),
    LAST_UPDATED_AT     DATE,
    LAST_UPDATED_BY     VARCHAR2(64)
)TABLESPACE GEC
;
COMMENT ON TABLE GEC_COUNTERPARTY 
  IS 'GEC_COUNTERPARTY TABLE, it is used to config G1 counterparty code information to book g1 loan/borrow';
COMMENT ON COLUMN GEC_COUNTERPARTY.COUNTERPARTY_CD
  IS 'Value is borrower and lender counterparty code. Lender counterparty code is:0997, T0997 and 2767, borrower counterparty code is: NDU2Y, NDU2X.';
COMMENT ON COLUMN GEC_COUNTERPARTY.TRANSACTION_CD
  IS 'e.g. B-orrow, L-oan. If cpty is a borrower cpty, this value is L, if cpty is a lender cpty, this value is B';
comment on column GEC_COUNTERPARTY.PREPAY_RATE
  is 'It is used to book loan or defalut a borrow"s prepary rate value. If user fill in number, this field store the value of number';
comment on column GEC_COUNTERPARTY.BENCHMARK_INDEX_CD
  is 'It is same to PREPAY_RATE. If user select a value form dropdown, this filed store the selected value';
comment on column GEC_COUNTERPARTY.GB_COLLATERAL_PERCENTAGE
  is 'If trade country of one security is GB, then fill G1 borrow and loan"s Required Margin using this field, for other country leave Required Margin blank';

alter table GEC_COUNTERPARTY add constraints GEC_COUNTERPARTY_PK PRIMARY KEY(COUNTERPARTY_ID) USING INDEX TABLESPACE GEC;

create unique index GEC_COUNTERPARTY_IDX1 on GEC_COUNTERPARTY (COUNTERPARTY_CD,TRANSACTION_CD) TABLESPACE GEC ;

ALTER TABLE GEC_COUNTERPARTY ADD CONSTRAINTS GEC_COUNTERPARTY_FK FOREIGN KEY(BENCHMARK_INDEX_CD) REFERENCES GEC_BENCHMARK_INDEX_RATE(BENCHMARK_INDEX_CD);
