CREATE TABLE GEC_G1_RETURN
(
G1_RETURN_ID	NUMBER(38),
ASSET_ID 	NUMBER(38),
IM_ORDER_ID	NUMBER(38),
FLIP_TRADE_ID	NUMBER(38),
BULK_G1_RETURN_ID	NUMBER(38),
TRANSACTION_TYPE	VARCHAR2(1),
TRANSACTION_CD	VARCHAR2(10),
TRADE_DATE	NUMBER(8),
SETTLE_DATE	NUMBER(8),
COUNTERPARTY_CD	VARCHAR2(6),
TRADE_COUNTRY_CD	VARCHAR2(3),
QTY	NUMBER(38),
REC_TYPE	VARCHAR2(1),
FUND_CD	VARCHAR2(4),
BTC_EXTRACTED_AT	DATE,
BTC_EXTRACTED_BY	VARCHAR2(64),
STATUS	VARCHAR2(1),
SOURCE_CD	VARCHAR2(64),
BARGAIN_REF	VARCHAR2(200),
UPDATED_AT	DATE,
UPDATED_BY	VARCHAR2(64),
NEW_BORROW_CPTY_CD	VARCHAR2(6),
BRANCH_CD	VARCHAR2(10),
POS_TYPE	VARCHAR2(3),
NEW_BORROW_COLL_TYPE	VARCHAR2(1),
NEW_BORROW_COLL_CODE	VARCHAR2(3),
DIVIDEND_TRADE_FLAG	VARCHAR2(1),
COUNTERPARTY_NAME	VARCHAR2(100),
NEW_BORROW_CPTY_NAME	VARCHAR2(100),
LAST_UPDATED_AT	DATE,
LAST_UPDATED_BY	VARCHAR2(64)
) TABLESPACE GEC
;
  
COMMENT ON TABLE GEC_G1_RETURN
  IS 'This table is used store G1 return information.';
COMMENT ON COLUMN GEC_G1_RETURN.BARGAIN_REF
  IS 'Borrow bargain references which user want to apply the borrow return, and multiple return bargain references separated with comma.';
COMMENT ON COLUMN GEC_G1_RETURN.TRANSACTION_TYPE
  IS 'Values: B, L. Indicate a borrow return or loan return, map to Posting_Type in BTC file.';
COMMENT ON COLUMN GEC_G1_RETURN.TRANSACTION_CD
  IS 'Values: FT,BTC,BR';
COMMENT ON COLUMN GEC_G1_RETURN.STATUS
  IS 'Values: P-ending (initial status), B-ooked, E-rror (Failed)';
COMMENT ON COLUMN GEC_G1_RETURN.SOURCE_CD
  IS 'Values: BTC,FT,BR';
COMMENT ON COLUMN GEC_G1_RETURN.NEW_BORROW_CPTY_CD
  IS 'This is the new Flip Borrow Counterparty, Value as – 0997, SBABCD';
COMMENT ON COLUMN GEC_G1_RETURN.BRANCH_CD
  IS 'Refer to GEC_BRANCH table';
COMMENT ON COLUMN GEC_G1_RETURN.POS_TYPE
  IS 'To indicate the return counterparty type – SB / NSB / FND (fund) / ICT';
COMMENT ON COLUMN GEC_G1_RETURN.NEW_BORROW_COLL_TYPE
  IS 'Value will be  C, N, P. Collateral type of the new borrow. In case the new borrow was a SB broker code, then derive the collateral type from G1L/NSB value of the fund associated with the SB broker code.';
COMMENT ON COLUMN GEC_G1_RETURN.DIVIDEND_TRADE_FLAG
  IS 'Values: N, Y, Blank. Indicates whether the bargian ref to return will apply on Dividend Trade or not';
COMMENT ON COLUMN GEC_G1_RETURN.DIVIDEND_TRADE_FLAG
  IS 'This is name of return cpty.';
COMMENT ON COLUMN GEC_G1_RETURN.NEW_BORROW_CPTY_NAME
  IS 'This is the new of new Flip  Borrow Counterparty Name.';
                
ALTER TABLE GEC_G1_RETURN
  ADD CONSTRAINT GEC_G1_RETURN_PK PRIMARY KEY (G1_RETURN_ID)  USING INDEX TABLESPACE  GEC;

ALTER TABLE GEC_G1_RETURN
  ADD CONSTRAINT GEC_G1_RETURN_FK1 FOREIGN KEY (FLIP_TRADE_ID)
  REFERENCES GEC_FLIP_TRADE (FLIP_TRADE_ID);
  
ALTER TABLE GEC_G1_RETURN
  ADD CONSTRAINT GEC_G1_RETURN_FK2 FOREIGN KEY (IM_ORDER_ID)
  REFERENCES GEC_IM_ORDER (IM_ORDER_ID);
  
ALTER TABLE GEC_G1_RETURN
  ADD CONSTRAINT GEC_G1_RETURN_FK3 FOREIGN KEY (ASSET_ID)
  REFERENCES GEC_ASSET (ASSET_ID);
  
ALTER TABLE GEC_G1_RETURN
  ADD CONSTRAINT GEC_G1_RETURN_FK4 FOREIGN KEY (BULK_G1_RETURN_ID)
  REFERENCES GEC_BULK_G1_RETURN (BULK_G1_RETURN_ID);
  
create index GEC_G1_RETURN_IDX1 on GEC_G1_RETURN (FLIP_TRADE_ID, STATUS) TABLESPACE GEC;