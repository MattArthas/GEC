CREATE TABLE GEC_MESSAGE
(
  MESSAGE_ID   	  		NUMBER(38) NOT NULL,
  REQUEST_ID            NUMBER(38),
  MESSAGE_TYPE    		VARCHAR2(64),
  CREATED_AT            DATE,
  MESSAGE_CONTENT   	BLOB,
  SOURCE_CD             VARCHAR2(64),
  STATUS                VARCHAR2(1),
  LAST_UPDATED_AT       DATE,
  LAST_UPDATED_BY       VARCHAR2(64)
) TABLESPACE GEC
LOB(MESSAGE_CONTENT) STORE AS GEC_MESSAGE_LS(TABLESPACE GEC)
;

ALTER TABLE GEC_MESSAGE
    ADD CONSTRAINT GEC_MESSAGE_PK PRIMARY KEY (MESSAGE_ID) USING INDEX TABLESPACE GEC;
ALTER TABLE GEC_MESSAGE
    ADD CONSTRAINT GEC_MESSAGE_FK1 FOREIGN KEY (REQUEST_ID) REFERENCES GEC_REQUEST (REQUEST_ID);   
    
COMMENT ON TABLE GEC_MESSAGE 
    IS 'Store Eze Castle XML message';
COMMENT ON COLUMN GEC_MESSAGE.MESSAGE_TYPE
    IS 'Value is LocateRequest/LocateRequestResponse/LocateFound/LocateFoundResponse';
COMMENT ON COLUMN GEC_MESSAGE.MESSAGE_CONTENT
    IS 'XML message stored using BLOB';
COMMENT ON COLUMN GEC_MESSAGE.SOURCE_CD
    IS 'Value is "Eze Castle"';
COMMENT ON COLUMN GEC_MESSAGE.STATUS
    IS 'Value is S/F for successful/fail';    
